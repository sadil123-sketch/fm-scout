# FM Genie Scout UI/UX Redesign
## Component Specification Document

**Version:** 1.0  
**Date:** December 2025  
**Author:** Product Team  

---

## Table of Contents

1. [Overview](#overview)
2. [Design System Foundation](#design-system-foundation)
3. [Component Hierarchy](#component-hierarchy)
4. [Layout Components](#layout-components)
5. [Navigation Components](#navigation-components)
6. [Dashboard Components](#dashboard-components)
7. [Filter Components](#filter-components)
8. [Data Display Components](#data-display-components)
9. [Player Components](#player-components)
10. [Staff Components](#staff-components)
11. [Club Components](#club-components)
12. [Shortlist Components](#shortlist-components)
13. [Comparison Components](#comparison-components)
14. [Rating System Components](#rating-system-components)
15. [History & Snapshot Components](#history--snapshot-components)
16. [Export Components](#export-components)
17. ["g" Edition Components](#g-edition-components)
18. [Common UI Components](#common-ui-components)
19. [Performance Specifications](#performance-specifications)

---

## Overview

This document provides detailed specifications for all UI components in the FM Genie Scout redesign. Each component includes:

- **Props Interface**: TypeScript interface for component inputs
- **State Interface**: Internal state management
- **Events**: Callbacks and event handlers
- **Styling**: Tailwind CSS class conventions
- **Accessibility**: ARIA attributes and keyboard navigation
- **Performance**: Optimization requirements for 250k+ records

### Tech Stack Reference

| Layer | Technology |
|-------|------------|
| Framework | Tauri 2.0 |
| Frontend | React 18 + TypeScript |
| State | Zustand |
| Styling | Tailwind CSS + Radix UI |
| Charts | Recharts + D3.js |
| Tables | TanStack Table (virtualized) |
| Icons | Lucide React |

---

## Design System Foundation

### Color Tokens

```typescript
const colors = {
  // Brand
  primary: {
    50: '#eff6ff',
    100: '#dbeafe',
    500: '#3b82f6',
    600: '#2563eb',
    700: '#1d4ed8',
  },
  
  // Semantic
  success: '#22c55e',
  warning: '#f59e0b',
  error: '#ef4444',
  info: '#3b82f6',
  
  // Ability Colors (CA/PA visualization)
  ability: {
    worldClass: '#22c55e',    // 160+
    excellent: '#84cc16',      // 140-159
    good: '#eab308',           // 120-139
    average: '#f97316',        // 100-119
    poor: '#ef4444',           // <100
  },
  
  // Attribute Colors (0-20 scale)
  attribute: {
    exceptional: '#22c55e',    // 18-20
    good: '#84cc16',           // 14-17
    average: '#eab308',        // 10-13
    poor: '#f97316',           // 6-9
    veryPoor: '#ef4444',       // 1-5
  },
  
  // Tag Colors
  tags: {
    target: '#22c55e',
    watchlist: '#eab308',
    loan: '#3b82f6',
    academy: '#f97316',
    avoid: '#ef4444',
    archived: '#6b7280',
  },
  
  // Dark Theme
  dark: {
    bg: '#0f172a',
    surface: '#1e293b',
    border: '#334155',
    text: '#f8fafc',
    muted: '#94a3b8',
  },
  
  // Light Theme
  light: {
    bg: '#ffffff',
    surface: '#f8fafc',
    border: '#e2e8f0',
    text: '#0f172a',
    muted: '#64748b',
  },
};
```

### Typography Scale

```typescript
const typography = {
  // Font Family
  fontFamily: {
    sans: ['Inter', 'system-ui', 'sans-serif'],
    mono: ['JetBrains Mono', 'monospace'],
  },
  
  // Size Scale
  fontSize: {
    xs: '0.75rem',     // 12px
    sm: '0.875rem',    // 14px
    base: '1rem',      // 16px
    lg: '1.125rem',    // 18px
    xl: '1.25rem',     // 20px
    '2xl': '1.5rem',   // 24px
    '3xl': '1.875rem', // 30px
  },
  
  // Font Weights
  fontWeight: {
    normal: 400,
    medium: 500,
    semibold: 600,
    bold: 700,
  },
};
```

### Spacing Scale

```typescript
const spacing = {
  0: '0',
  1: '0.25rem',   // 4px
  2: '0.5rem',    // 8px
  3: '0.75rem',   // 12px
  4: '1rem',      // 16px
  5: '1.25rem',   // 20px
  6: '1.5rem',    // 24px
  8: '2rem',      // 32px
  10: '2.5rem',   // 40px
  12: '3rem',     // 48px
  16: '4rem',     // 64px
};
```

### Component Size Variants

```typescript
type Size = 'sm' | 'md' | 'lg';

const sizeConfig = {
  button: {
    sm: 'h-8 px-3 text-sm',
    md: 'h-10 px-4 text-base',
    lg: 'h-12 px-6 text-lg',
  },
  input: {
    sm: 'h-8 px-2 text-sm',
    md: 'h-10 px-3 text-base',
    lg: 'h-12 px-4 text-lg',
  },
  avatar: {
    sm: 'h-8 w-8',
    md: 'h-10 w-10',
    lg: 'h-16 w-16',
  },
};
```

---

## Component Hierarchy

```
App
├── AppShell
│   ├── Sidebar
│   │   ├── Logo
│   │   ├── NavMenu
│   │   ├── ShortlistQuickAccess
│   │   └── UserMenu
│   ├── Header
│   │   ├── SearchBar (Global)
│   │   ├── GameStatus
│   │   ├── NotificationBell
│   │   └── SettingsToggle
│   └── MainContent
│       ├── Dashboard
│       ├── PlayerExplorer
│       ├── StaffExplorer
│       ├── ClubExplorer
│       ├── ShortlistManager
│       ├── RatingDesigner
│       ├── HistoryManager
│       └── Settings
├── Modals
│   ├── PlayerProfile
│   ├── StaffProfile
│   ├── ClubProfile
│   ├── ComparisonView
│   ├── ExportDialog
│   └── FilterSaveDialog
└── Overlays
    ├── ToastContainer
    ├── LoadingOverlay
    └── UpgradePrompt (g Edition)
```

---

## Layout Components

### AppShell

Root layout component providing consistent structure across all views.

```typescript
interface AppShellProps {
  children: React.ReactNode;
  sidebarCollapsed?: boolean;
  onSidebarToggle?: () => void;
}

interface AppShellState {
  sidebarWidth: number;
  isResizing: boolean;
}
```

**Structure:**
```tsx
<AppShell>
  <Sidebar />
  <div className="flex-1 flex flex-col">
    <Header />
    <main className="flex-1 overflow-auto">
      {children}
    </main>
  </div>
</AppShell>
```

**Styling:**
```css
/* Base layout */
.app-shell {
  @apply flex h-screen bg-light-bg dark:bg-dark-bg;
}

/* Responsive breakpoints */
@screen lg { .sidebar { @apply w-64; } }
@screen md { .sidebar { @apply w-16; } }
```

---

### Sidebar

Collapsible navigation sidebar with primary actions.

```typescript
interface SidebarProps {
  collapsed: boolean;
  onToggle: () => void;
  activeRoute: string;
  shortcuts: ShortcutItem[];
}

interface ShortcutItem {
  id: string;
  label: string;
  icon: LucideIcon;
  route: string;
  badge?: number;
}
```

**Features:**
- Collapsible (icon-only mode)
- Tooltip labels when collapsed
- Active state indication
- Shortlist quick-access section
- Subscription status indicator (g Edition)

**Keyboard Navigation:**
- `Ctrl+B`: Toggle sidebar
- Arrow keys: Navigate menu items
- `Enter`: Select item

---

### Header

Top navigation bar with global search and status.

```typescript
interface HeaderProps {
  gameLoaded: boolean;
  gameName?: string;
  playerCount?: number;
  onSearch: (query: string) => void;
  onSettingsClick: () => void;
}
```

**Structure:**
```tsx
<Header>
  <GlobalSearch />
  <GameStatusBadge />
  <div className="flex items-center gap-2">
    <NotificationBell />
    <ThemeToggle />
    <SettingsButton />
  </div>
</Header>
```

---

### ContentArea

Scrollable content container with optional padding and max-width.

```typescript
interface ContentAreaProps {
  children: React.ReactNode;
  maxWidth?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
  padding?: boolean;
  className?: string;
}
```

**Styling:**
```css
.content-area {
  @apply flex-1 overflow-auto;
}

.content-area--padded {
  @apply p-6;
}

.content-area--max-lg {
  @apply max-w-5xl mx-auto;
}
```

---

## Navigation Components

### NavMenu

Primary navigation menu with nested items support.

```typescript
interface NavMenuProps {
  items: NavItem[];
  activeId: string;
  collapsed: boolean;
  onNavigate: (id: string) => void;
}

interface NavItem {
  id: string;
  label: string;
  icon: LucideIcon;
  route: string;
  children?: NavItem[];
  badge?: {
    count: number;
    variant: 'default' | 'warning' | 'error';
  };
  gEditionOnly?: boolean;
}
```

**Menu Structure:**
```typescript
const navItems: NavItem[] = [
  { id: 'dashboard', label: 'Dashboard', icon: Home, route: '/' },
  { id: 'players', label: 'Players', icon: Users, route: '/players' },
  { id: 'staff', label: 'Staff', icon: UserCog, route: '/staff' },
  { id: 'clubs', label: 'Clubs', icon: Building, route: '/clubs' },
  { id: 'shortlists', label: 'Shortlists', icon: List, route: '/shortlists', badge: { count: 3 } },
  { id: 'ratings', label: 'Rating Designer', icon: Sliders, route: '/ratings' },
  { id: 'history', label: 'History', icon: History, route: '/history' },
  { id: 'top-lists', label: 'Top Lists', icon: Trophy, route: '/top-lists', gEditionOnly: true },
  { id: 'role-finder', label: 'Role Finder', icon: Target, route: '/role-finder', gEditionOnly: true },
];
```

---

### Breadcrumbs

Navigation breadcrumb trail.

```typescript
interface BreadcrumbsProps {
  items: BreadcrumbItem[];
  separator?: React.ReactNode;
}

interface BreadcrumbItem {
  label: string;
  href?: string;
  icon?: LucideIcon;
}
```

**Example:**
```tsx
<Breadcrumbs
  items={[
    { label: 'Players', href: '/players', icon: Users },
    { label: 'Search Results' },
    { label: 'Erling Haaland' },
  ]}
/>
```

---

### TabNavigation

Tab-based navigation for sectioned content.

```typescript
interface TabNavigationProps {
  tabs: Tab[];
  activeTab: string;
  onChange: (tabId: string) => void;
  variant?: 'underline' | 'pills' | 'bordered';
}

interface Tab {
  id: string;
  label: string;
  icon?: LucideIcon;
  disabled?: boolean;
  badge?: number;
}
```

---

## Dashboard Components

### DashboardLayout

Grid-based dashboard layout with configurable widgets.

```typescript
interface DashboardLayoutProps {
  widgets: DashboardWidget[];
  columns?: 2 | 3 | 4;
}

interface DashboardWidget {
  id: string;
  component: React.ComponentType;
  span?: 1 | 2 | 3 | 4;
  minHeight?: number;
}
```

---

### GameStatusCard

Primary card showing FM save status and load action.

```typescript
interface GameStatusCardProps {
  status: 'not-detected' | 'detected' | 'loading' | 'loaded' | 'error';
  gameName?: string;
  fmVersion?: string;
  playerCount?: number;
  staffCount?: number;
  clubCount?: number;
  loadProgress?: number;
  loadStatus?: string;
  onLoad: () => void;
  onManualLoad: () => void;
}
```

**States:**

| State | Visual | Actions |
|-------|--------|---------|
| `not-detected` | Gray card, FM icon | "Launch FM" instructions, "Manual Load" button |
| `detected` | Blue card, animated | "Load Save" primary button |
| `loading` | Progress bar, status text | "Cancel" button |
| `loaded` | Green card, stats grid | "Reload" button |
| `error` | Red card, error message | "Retry" button, "Manual Load" button |

**Structure:**
```tsx
<Card className="p-6">
  <div className="flex items-center gap-4">
    <GameIcon status={status} />
    <div className="flex-1">
      <h3 className="font-semibold">{getTitle(status)}</h3>
      <p className="text-muted">{getDescription(status)}</p>
    </div>
  </div>
  
  {status === 'loading' && (
    <ProgressBar value={loadProgress} label={loadStatus} />
  )}
  
  {status === 'loaded' && (
    <StatsGrid players={playerCount} staff={staffCount} clubs={clubCount} />
  )}
  
  <div className="flex gap-2 mt-4">
    <Button onClick={onLoad} disabled={status === 'loading'}>
      {getButtonLabel(status)}
    </Button>
    {status !== 'loaded' && (
      <Button variant="outline" onClick={onManualLoad}>
        Manual Load
      </Button>
    )}
  </div>
</Card>
```

---

### QuickAccessCard

Shortcut cards for common actions.

```typescript
interface QuickAccessCardProps {
  title: string;
  description: string;
  icon: LucideIcon;
  onClick: () => void;
  variant?: 'default' | 'primary' | 'success';
  disabled?: boolean;
}
```

**Variants:**
- **Default**: Neutral background, standard hover
- **Primary**: Blue accent, prominent for main actions
- **Success**: Green accent, for completed states

---

### RecentActivityList

List of recent saves and shortlists.

```typescript
interface RecentActivityListProps {
  items: RecentItem[];
  onItemClick: (item: RecentItem) => void;
  onClearHistory: () => void;
  maxItems?: number;
}

interface RecentItem {
  id: string;
  type: 'save' | 'shortlist' | 'search';
  label: string;
  timestamp: Date;
  metadata?: Record<string, string>;
}
```

---

## Filter Components

### UnifiedFilterPanel

Primary filter interface supporting Players, Staff, and Clubs.

```typescript
interface UnifiedFilterPanelProps {
  entityType: 'players' | 'staff' | 'clubs';
  filters: FilterState;
  onChange: (filters: FilterState) => void;
  resultCount: number;
  isLoading: boolean;
  savedFilters: SavedFilter[];
  onSaveFilter: (name: string) => void;
  onLoadFilter: (filter: SavedFilter) => void;
  onReset: () => void;
  isGEdition: boolean;
}

interface FilterState {
  players?: PlayerFilterState;
  staff?: StaffFilterState;
  clubs?: ClubFilterState;
}
```

**Structure:**
```tsx
<FilterPanel>
  <FilterTabs 
    tabs={['Players', 'Staff', 'Clubs']} 
    active={entityType}
    onChange={onEntityChange}
  />
  
  <FilterPresets 
    presets={getPresets(entityType)} 
    onSelect={applyPreset}
  />
  
  <FilterSections>
    {entityType === 'players' && <PlayerFilters />}
    {entityType === 'staff' && <StaffFilters />}
    {entityType === 'clubs' && <ClubFilters />}
  </FilterSections>
  
  <FilterFooter>
    <ResultCount count={resultCount} loading={isLoading} />
    <FilterActions onSave={onSaveFilter} onReset={onReset} />
  </FilterFooter>
</FilterPanel>
```

---

### PlayerFilters

Player-specific filter sections.

```typescript
interface PlayerFilterState {
  // General
  positions: Position[];
  ageRange: [number, number];
  nationalities: string[];
  divisions: string[];
  clubs: string[];
  
  // CA/PA
  caRange: [number, number];
  paRange: [number, number];
  minRating: number;
  
  // Contract
  contractStatus: ContractStatus[];
  valueRange: [number, number];
  wageRange: [number, number];
  budgetLimit?: number;
  
  // Attributes
  technicalMins: Partial<Record<TechnicalAttribute, number>>;
  mentalMins: Partial<Record<MentalAttribute, number>>;
  physicalMins: Partial<Record<PhysicalAttribute, number>>;
  hiddenMins: Partial<Record<HiddenAttribute, number>>;
  personalities: PersonalityType[];
  preferredMoves: string[];
  
  // g Edition
  searchByPotential?: boolean;
  minDevProbability?: number;
  progressRate?: 'slow' | 'normal' | 'fast';
  
  // Shortlist
  shortlistId?: string;
}
```

**Filter Sections:**

```tsx
<Accordion type="multiple" defaultValue={['general', 'ability']}>
  <AccordionItem value="general">
    <AccordionTrigger>General</AccordionTrigger>
    <AccordionContent>
      <PositionMultiSelect />
      <AgeRangeSlider />
      <NationalitySearchSelect />
      <DivisionDropdown />
    </AccordionContent>
  </AccordionItem>
  
  <AccordionItem value="ability">
    <AccordionTrigger>CA/PA & Rating</AccordionTrigger>
    <AccordionContent>
      <AbilityRangeSlider label="Current Ability" />
      <AbilityRangeSlider label="Potential Ability" />
      <RatingThresholdSlider />
    </AccordionContent>
  </AccordionItem>
  
  <AccordionItem value="contract">
    <AccordionTrigger>Contract</AccordionTrigger>
    <AccordionContent>
      <ContractStatusPills />
      <ValueRangeInput />
      <WageRangeInput />
      <BudgetHelperToggle />
    </AccordionContent>
  </AccordionItem>
  
  <AccordionItem value="attributes">
    <AccordionTrigger>Attributes</AccordionTrigger>
    <AccordionContent>
      <AttributeGrid category="technical" />
      <AttributeGrid category="mental" />
      <AttributeGrid category="physical" />
      <Collapsible title="Hidden Attributes">
        <HiddenAttributeSliders />
      </Collapsible>
      <PersonalityRadioGroup />
      <PreferredMovesMultiSelect />
    </AccordionContent>
  </AccordionItem>
  
  {isGEdition && (
    <AccordionItem value="projections">
      <AccordionTrigger>
        <GEditionBadge /> Advanced Projections
      </AccordionTrigger>
      <AccordionContent>
        <SearchByPotentialToggle />
        <DevProbabilitySlider />
        <ProgressRateSelector />
      </AccordionContent>
    </AccordionItem>
  )}
</Accordion>
```

---

### FilterPresets

Quick-access filter presets.

```typescript
interface FilterPresetsProps {
  presets: FilterPreset[];
  onSelect: (preset: FilterPreset) => void;
  activePresetId?: string;
}

interface FilterPreset {
  id: string;
  label: string;
  icon: LucideIcon;
  filters: Partial<FilterState>;
  description?: string;
}
```

**Default Player Presets:**
```typescript
const playerPresets: FilterPreset[] = [
  {
    id: 'wonderkids',
    label: 'Wonderkids',
    icon: Sparkles,
    description: 'Young players with high potential',
    filters: {
      ageRange: [15, 21],
      paRange: [150, 200],
    },
  },
  {
    id: 'bargains',
    label: 'Top Bargains',
    icon: Tag,
    description: 'High ability, low price',
    filters: {
      caRange: [130, 200],
      valueRange: [0, 5000000],
    },
  },
  {
    id: 'free-agents',
    label: 'Free Agents',
    icon: UserMinus,
    description: 'Players without contracts',
    filters: {
      contractStatus: ['free'],
    },
  },
  {
    id: 'expiring',
    label: 'Expiring Contracts',
    icon: Clock,
    description: 'Contract ending within 6 months',
    filters: {
      contractStatus: ['expiring'],
    },
  },
];
```

---

### RangeSlider

Dual-handle range slider with real-time value display.

```typescript
interface RangeSliderProps {
  label: string;
  min: number;
  max: number;
  value: [number, number];
  onChange: (value: [number, number]) => void;
  step?: number;
  formatValue?: (value: number) => string;
  showInputs?: boolean;
  colorScale?: 'ability' | 'attribute' | 'none';
  resultCount?: number;
}
```

**Features:**
- Dual handles for min/max
- Optional numeric inputs
- Color gradient based on scale
- Live result count update
- Debounced onChange (300ms)

**Styling:**
```tsx
<div className="space-y-2">
  <div className="flex justify-between">
    <Label>{label}</Label>
    {resultCount !== undefined && (
      <Badge variant="secondary">{resultCount} matches</Badge>
    )}
  </div>
  
  <Slider.Root
    value={value}
    onValueChange={onChange}
    min={min}
    max={max}
    step={step}
    className="relative flex items-center w-full h-5"
  >
    <Slider.Track className="relative h-2 flex-1 rounded-full bg-slate-200">
      <Slider.Range className="absolute h-full rounded-full bg-primary-500" />
    </Slider.Track>
    <Slider.Thumb className="block w-5 h-5 rounded-full bg-white border-2 border-primary-500" />
    <Slider.Thumb className="block w-5 h-5 rounded-full bg-white border-2 border-primary-500" />
  </Slider.Root>
  
  {showInputs && (
    <div className="flex gap-2">
      <Input type="number" value={value[0]} onChange={...} />
      <span>to</span>
      <Input type="number" value={value[1]} onChange={...} />
    </div>
  )}
</div>
```

---

### AttributeGrid

Grid of attribute sliders for filtering by minimum values.

```typescript
interface AttributeGridProps {
  category: 'technical' | 'mental' | 'physical';
  values: Partial<Record<string, number>>;
  onChange: (attribute: string, value: number) => void;
  columns?: 2 | 3 | 4;
}
```

**Structure:**
```tsx
<div className={`grid grid-cols-${columns} gap-3`}>
  {attributes.map(attr => (
    <AttributeSlider
      key={attr.id}
      label={attr.label}
      value={values[attr.id] || 0}
      onChange={(v) => onChange(attr.id, v)}
      tooltip={attr.description}
    />
  ))}
</div>
```

---

### SearchableSelect

Searchable dropdown for long lists (nationalities, clubs).

```typescript
interface SearchableSelectProps {
  label: string;
  options: SelectOption[];
  value: string[];
  onChange: (value: string[]) => void;
  placeholder?: string;
  searchPlaceholder?: string;
  multiple?: boolean;
  maxDisplay?: number;
}

interface SelectOption {
  value: string;
  label: string;
  icon?: React.ReactNode;
  group?: string;
}
```

**Features:**
- Inline search filtering
- Grouped options
- Multi-select with chips
- Virtualized for large lists (200+ options)
- Keyboard navigation

---

## Data Display Components

### VirtualizedTable

High-performance table for 250k+ records.

```typescript
interface VirtualizedTableProps<T> {
  data: T[];
  columns: ColumnDef<T>[];
  onRowClick?: (row: T) => void;
  onSelectionChange?: (selected: T[]) => void;
  selectedRows?: T[];
  sortState?: SortState;
  onSortChange?: (state: SortState) => void;
  rowHeight?: number;
  overscan?: number;
  stickyColumns?: string[];
  loading?: boolean;
  emptyState?: React.ReactNode;
}

interface ColumnDef<T> {
  id: string;
  header: string;
  accessor: keyof T | ((row: T) => any);
  width?: number;
  minWidth?: number;
  sortable?: boolean;
  resizable?: boolean;
  cell?: (value: any, row: T) => React.ReactNode;
  headerCell?: () => React.ReactNode;
}

interface SortState {
  column: string;
  direction: 'asc' | 'desc';
}
```

**Performance Requirements:**
- Virtual scrolling with 100 items rendered max
- 60fps scroll performance
- < 100ms filter response time
- Sticky columns for Name, Club, Age
- Resizable columns with persistence

**Implementation:**
```tsx
import { useVirtualizer } from '@tanstack/react-virtual';

const VirtualizedTable = ({ data, columns, rowHeight = 48 }) => {
  const parentRef = useRef<HTMLDivElement>(null);
  
  const virtualizer = useVirtualizer({
    count: data.length,
    getScrollElement: () => parentRef.current,
    estimateSize: () => rowHeight,
    overscan: 10,
  });
  
  return (
    <div ref={parentRef} className="h-full overflow-auto">
      <table className="w-full">
        <TableHeader columns={columns} />
        <tbody
          style={{ height: `${virtualizer.getTotalSize()}px`, position: 'relative' }}
        >
          {virtualizer.getVirtualItems().map((virtualRow) => (
            <TableRow
              key={virtualRow.key}
              row={data[virtualRow.index]}
              columns={columns}
              style={{
                position: 'absolute',
                top: 0,
                transform: `translateY(${virtualRow.start}px)`,
                height: rowHeight,
              }}
            />
          ))}
        </tbody>
      </table>
    </div>
  );
};
```

---

### ColumnCustomizer

Drag-and-drop column configuration.

```typescript
interface ColumnCustomizerProps {
  availableColumns: ColumnConfig[];
  visibleColumns: string[];
  onChange: (columns: string[]) => void;
  presets: ColumnPreset[];
  onSavePreset: (name: string, columns: string[]) => void;
}

interface ColumnConfig {
  id: string;
  label: string;
  group: string;
  defaultVisible: boolean;
}

interface ColumnPreset {
  id: string;
  name: string;
  columns: string[];
}
```

**Column Groups:**
```typescript
const columnGroups = {
  basic: ['name', 'age', 'nationality', 'club', 'position'],
  ability: ['ca', 'pa', 'rating'],
  contract: ['wage', 'value', 'contractExpiry'],
  technical: ['corners', 'crossing', 'dribbling', 'finishing', ...],
  mental: ['aggression', 'anticipation', 'bravery', 'composure', ...],
  physical: ['acceleration', 'agility', 'balance', 'jumping', ...],
  hidden: ['adaptability', 'ambition', 'consistency', 'controversy', ...],
};
```

---

### PlayerCard

Compact player display card for grid views.

```typescript
interface PlayerCardProps {
  player: PlayerSummary;
  onClick: () => void;
  selected?: boolean;
  onSelect?: (selected: boolean) => void;
  showComparison?: boolean;
  variant?: 'compact' | 'default' | 'detailed';
}

interface PlayerSummary {
  id: string;
  name: string;
  age: number;
  nationality: string;
  club: string;
  position: string;
  currentAbility: number;
  potentialAbility: number;
  portraitUrl?: string;
  status?: PlayerStatus[];
}
```

**Structure:**
```tsx
<Card 
  className={cn(
    "p-3 cursor-pointer hover:shadow-md transition-shadow",
    selected && "ring-2 ring-primary-500"
  )}
  onClick={onClick}
>
  <div className="flex gap-3">
    <Avatar src={portraitUrl} fallback={getInitials(name)} size="lg" />
    
    <div className="flex-1 min-w-0">
      <div className="flex items-center gap-2">
        <h4 className="font-medium truncate">{name}</h4>
        <NationalityFlag code={nationality} size="sm" />
      </div>
      
      <p className="text-sm text-muted truncate">
        {position} • {club}
      </p>
      
      <div className="flex items-center gap-3 mt-2">
        <AbilityBadge label="CA" value={currentAbility} />
        <AbilityBadge label="PA" value={potentialAbility} />
        <span className="text-sm text-muted">{age} years</span>
      </div>
    </div>
    
    {onSelect && (
      <Checkbox checked={selected} onChange={onSelect} />
    )}
  </div>
  
  {status?.length > 0 && (
    <div className="flex gap-1 mt-2">
      {status.map(s => <StatusBadge key={s} status={s} />)}
    </div>
  )}
</Card>
```

---

### AbilityBar

Visual representation of CA/PA values.

```typescript
interface AbilityBarProps {
  current: number;
  potential: number;
  max?: number;
  showLabels?: boolean;
  size?: 'sm' | 'md' | 'lg';
}
```

**Structure:**
```tsx
<div className="space-y-1">
  {showLabels && (
    <div className="flex justify-between text-xs">
      <span>CA: {current}</span>
      <span>PA: {potential}</span>
    </div>
  )}
  
  <div className="relative h-2 bg-slate-200 rounded-full overflow-hidden">
    {/* Potential bar (background) */}
    <div 
      className="absolute h-full bg-primary-200 rounded-full"
      style={{ width: `${(potential / max) * 100}%` }}
    />
    {/* Current bar (foreground) */}
    <div 
      className={cn("absolute h-full rounded-full", getAbilityColor(current))}
      style={{ width: `${(current / max) * 100}%` }}
    />
  </div>
</div>
```

---

## Player Components

### PlayerProfileModal

Full player profile displayed in modal or page.

```typescript
interface PlayerProfileModalProps {
  playerId: string;
  isOpen: boolean;
  onClose: () => void;
  onAddToShortlist: (shortlistId: string) => void;
  onCompare: () => void;
  onCreateSnapshot: () => void;
  isGEdition: boolean;
}
```

**Tab Structure:**
```typescript
const profileTabs = [
  { id: 'profile', label: 'Profile', icon: User },
  { id: 'transfer', label: 'Transfer', icon: DollarSign },
  { id: 'positions', label: 'Positions', icon: MapPin },
  { id: 'ratings', label: 'Ratings', icon: Star },
  { id: 'report', label: 'Report', icon: FileText },
  { id: 'history', label: 'History', icon: History },
  // g Edition only
  { id: 'development', label: 'Development', icon: TrendingUp, gEditionOnly: true },
];
```

---

### ProfileHeader

Player profile header with portrait and key info.

```typescript
interface ProfileHeaderProps {
  player: Player;
  onAddToShortlist: () => void;
  onCompare: () => void;
  onShare: () => void;
}
```

**Structure:**
```tsx
<div className="flex gap-6 p-6 bg-gradient-to-r from-slate-100 to-white dark:from-slate-800 dark:to-slate-900">
  <PlayerPortrait 
    src={player.portraitUrl} 
    size="xl"
    fallback={player.name}
  />
  
  <div className="flex-1">
    <div className="flex items-center gap-3">
      <h1 className="text-2xl font-bold">{player.name}</h1>
      <NationalityFlag code={player.nationality} size="md" />
      {player.status.map(s => <StatusBadge key={s} status={s} />)}
    </div>
    
    <div className="flex items-center gap-4 mt-2 text-muted">
      <span>{player.age} years old</span>
      <span>•</span>
      <span>{player.position.join(', ')}</span>
      <span>•</span>
      <ClubBadge club={player.club} />
    </div>
    
    <div className="flex gap-4 mt-4">
      <AbilityGauge label="Current Ability" value={player.ca} />
      <AbilityGauge label="Potential Ability" value={player.pa} />
    </div>
  </div>
  
  <div className="flex flex-col gap-2">
    <Button onClick={onAddToShortlist}>
      <Plus className="w-4 h-4 mr-2" /> Add to Shortlist
    </Button>
    <Button variant="outline" onClick={onCompare}>
      <GitCompare className="w-4 h-4 mr-2" /> Compare
    </Button>
    <Button variant="ghost" onClick={onShare}>
      <Share className="w-4 h-4 mr-2" /> Share
    </Button>
  </div>
</div>
```

---

### AttributeRadarChart

Spider/radar chart for attribute visualization.

```typescript
interface AttributeRadarChartProps {
  attributes: AttributeSet;
  position: Position;
  compareWith?: AttributeSet;
  size?: number;
  showLabels?: boolean;
  interactive?: boolean;
}

type AttributeSet = Record<string, number>;
```

**Features:**
- Position-specific attribute selection
- Optional comparison overlay
- Interactive hover for values
- Color-coded by attribute quality
- Exportable as image

**Implementation:**
```tsx
import { RadarChart, PolarGrid, PolarAngleAxis, Radar, ResponsiveContainer } from 'recharts';

<ResponsiveContainer width="100%" height={size}>
  <RadarChart data={formatData(attributes, position)}>
    <PolarGrid />
    <PolarAngleAxis dataKey="attribute" />
    <Radar
      name="Current"
      dataKey="value"
      stroke="#3b82f6"
      fill="#3b82f6"
      fillOpacity={0.3}
    />
    {compareWith && (
      <Radar
        name="Compare"
        dataKey="compareValue"
        stroke="#f59e0b"
        fill="#f59e0b"
        fillOpacity={0.3}
      />
    )}
  </RadarChart>
</ResponsiveContainer>
```

---

### HiddenAttributesTable

Table displaying hidden attributes with explanations.

```typescript
interface HiddenAttributesTableProps {
  attributes: HiddenAttributes;
  showTooltips?: boolean;
  highlightStrengths?: boolean;
}

interface HiddenAttributes {
  adaptability: number;
  ambition: number;
  controversy: number;
  consistency: number;
  dirtiness: number;
  importantMatches: number;
  injuryProneness: number;
  loyalty: number;
  pressure: number;
  professionalism: number;
  sportsmanship: number;
  temperament: number;
  versatility: number;
}
```

**Attribute Explanations:**
```typescript
const hiddenAttributeDescriptions = {
  adaptability: 'How quickly the player adapts to new clubs and countries',
  ambition: 'Drive to succeed and improve. High ambition aids development',
  consistency: 'How often the player performs at their best level',
  // ... etc
};
```

---

### PositionHeatmap

Interactive pitch diagram showing position proficiency.

```typescript
interface PositionHeatmapProps {
  ratings: Record<Position, number>;
  preferredFoot: 'Left' | 'Right' | 'Either';
  weakFootAbility: number;
  onPositionClick?: (position: Position) => void;
}
```

**Structure:**
```tsx
<div className="relative aspect-[3/4] bg-green-700 rounded-lg overflow-hidden">
  {/* Pitch markings */}
  <PitchMarkings />
  
  {/* Position circles */}
  {positions.map(pos => (
    <PositionCircle
      key={pos.id}
      position={pos}
      rating={ratings[pos.id]}
      style={{
        position: 'absolute',
        left: `${pos.x}%`,
        top: `${pos.y}%`,
      }}
      onClick={() => onPositionClick?.(pos.id)}
    />
  ))}
  
  {/* Footedness indicator */}
  <FootednessIndicator
    preferredFoot={preferredFoot}
    weakFootAbility={weakFootAbility}
  />
</div>
```

---

### TransferCard

Financial information summary card.

```typescript
interface TransferCardProps {
  wage: number;
  marketValue: number;
  saleValue: number;
  releaseClauses: ReleaseClause[];
  contractExpiry: Date;
  budgetLimit?: number;
  comparableTransfers?: ComparableTransfer[]; // g Edition
}

interface ReleaseClause {
  type: 'minimum' | 'nonPromotion' | 'relegation' | 'foreign';
  value: number;
}

interface ComparableTransfer {
  playerName: string;
  fee: number;
  date: Date;
  fromClub: string;
  toClub: string;
}
```

---

### RoleSuitabilityList

Sortable list of role suitability scores.

```typescript
interface RoleSuitabilityListProps {
  roles: RoleSuitability[];
  currentRatingScheme: string;
  onSchemeChange: (schemeId: string) => void;
  onRoleClick: (role: Role) => void;
}

interface RoleSuitability {
  role: Role;
  duty: 'Defend' | 'Support' | 'Attack';
  suitability: number; // 0-100
  recommendation: 'Accomplished' | 'Competent' | 'Unconvincing' | 'Unsuitable';
}
```

---

## Staff Components

### StaffFilters

Staff-specific filter configuration.

```typescript
interface StaffFilterState {
  // General
  roles: StaffRole[];
  ageRange: [number, number];
  nationalities: string[];
  contractStatus: ContractStatus[];
  
  // Ratings
  trainingRatings: Partial<Record<TrainingCategory, number>>;
  
  // Ability
  caRange: [number, number];
  paRange: [number, number];
  
  // Hidden
  hiddenMins: Partial<Record<StaffHiddenAttribute, number>>;
}

type StaffRole = 
  | 'manager' 
  | 'assistantManager' 
  | 'coach' 
  | 'fitnessCoach'
  | 'goalkeepingCoach'
  | 'scout'
  | 'physio'
  | 'dataAnalyst'
  | 'headOfYouth';

type TrainingCategory = 
  | 'attacking'
  | 'defending'
  | 'tactical'
  | 'technical'
  | 'mental'
  | 'fitness'
  | 'goalkeeping';
```

---

### StaffCard

Compact staff display card.

```typescript
interface StaffCardProps {
  staff: StaffSummary;
  onClick: () => void;
  variant?: 'compact' | 'default';
}

interface StaffSummary {
  id: string;
  name: string;
  age: number;
  nationality: string;
  currentClub?: string;
  role: StaffRole;
  currentAbility: number;
  potentialAbility: number;
  topTrainingRatings: { category: string; stars: number }[];
}
```

**Structure:**
```tsx
<Card className="p-4 cursor-pointer hover:shadow-md" onClick={onClick}>
  <div className="flex gap-4">
    <Avatar src={staff.portraitUrl} fallback={getInitials(staff.name)} />
    
    <div className="flex-1">
      <div className="flex items-center gap-2">
        <h4 className="font-medium">{staff.name}</h4>
        <Badge variant="outline">{staff.role}</Badge>
      </div>
      
      <p className="text-sm text-muted">
        {staff.currentClub || 'Free Agent'} • {staff.age} years
      </p>
      
      <div className="flex gap-3 mt-2">
        {staff.topTrainingRatings.slice(0, 3).map(rating => (
          <StarRating 
            key={rating.category}
            label={rating.category}
            value={rating.stars}
            max={5}
          />
        ))}
      </div>
    </div>
    
    <AbilityBadge label="CA" value={staff.currentAbility} />
  </div>
</Card>
```

---

### StarRating

Star-based rating display.

```typescript
interface StarRatingProps {
  value: number;
  max?: number;
  label?: string;
  size?: 'sm' | 'md' | 'lg';
  interactive?: boolean;
  onChange?: (value: number) => void;
}
```

**Structure:**
```tsx
<div className="flex items-center gap-1">
  {label && <span className="text-xs text-muted mr-1">{label}:</span>}
  {Array.from({ length: max }).map((_, i) => (
    <Star
      key={i}
      className={cn(
        sizeClasses[size],
        i < Math.floor(value) ? 'fill-yellow-400 text-yellow-400' :
        i < value ? 'fill-yellow-400/50 text-yellow-400' :
        'text-slate-300'
      )}
      onClick={interactive ? () => onChange?.(i + 1) : undefined}
    />
  ))}
</div>
```

---

## Club Components

### ClubFilters

Club-specific filter configuration.

```typescript
interface ClubFilterState {
  // Location
  continents: string[];
  countries: string[];
  leagues: string[];
  
  // Status
  reputationRange: [number, number];
  managerVacancy: boolean | null;
  boardConfidence: 'low' | 'medium' | 'high' | null;
  
  // Finances
  transferBudgetRange: [number, number];
  wageBudgetRange: [number, number];
  balanceRange: [number, number];
  
  // Facilities
  trainingFacilityRange: [number, number];
  youthFacilityRange: [number, number];
  stadiumCapacityRange: [number, number];
  
  // Tactical
  formations: string[];
  playingStyles: string[];
}
```

---

### ClubCard

Club summary card.

```typescript
interface ClubCardProps {
  club: ClubSummary;
  onClick: () => void;
  showFinances?: boolean;
}

interface ClubSummary {
  id: string;
  name: string;
  country: string;
  league: string;
  reputation: number;
  stadiumCapacity: number;
  transferBudget: number;
  managerName?: string;
  logoUrl?: string;
}
```

---

### ClubProfileModal

Full club profile display.

```typescript
interface ClubProfileModalProps {
  clubId: string;
  isOpen: boolean;
  onClose: () => void;
  onViewPlayers: () => void;
  onViewStaff: () => void;
}
```

**Tab Structure:**
```typescript
const clubTabs = [
  { id: 'info', label: 'Information', icon: Info },
  { id: 'finances', label: 'Finances', icon: DollarSign },
  { id: 'facilities', label: 'Facilities', icon: Building },
  { id: 'tactics', label: 'Tactics', icon: Layout },
  { id: 'squad', label: 'Squad', icon: Users },
];
```

---

### FormationBoard

Interactive formation display.

```typescript
interface FormationBoardProps {
  formation: string;
  players?: FormationPlayer[];
  interactive?: boolean;
  onPlayerClick?: (playerId: string) => void;
  showRatings?: boolean;
}

interface FormationPlayer {
  playerId: string;
  name: string;
  position: Position;
  rating: number;
  portraitUrl?: string;
}
```

---

## Shortlist Components

### ShortlistPanel

Dedicated shortlist management panel.

```typescript
interface ShortlistPanelProps {
  shortlists: Shortlist[];
  activeShortlistId: string;
  onSelectShortlist: (id: string) => void;
  onCreateShortlist: (name: string) => void;
  onDeleteShortlist: (id: string) => void;
  onImport: (file: File) => void;
  onExport: (id: string, format: ExportFormat) => void;
  syncStatus: 'synced' | 'syncing' | 'error';
  autoSyncEnabled: boolean;
  onAutoSyncToggle: (enabled: boolean) => void;
}

interface Shortlist {
  id: string;
  name: string;
  playerCount: number;
  isFromFM: boolean;
  lastModified: Date;
  color?: string;
}
```

---

### ShortlistPlayerRow

Extended player row with annotation support.

```typescript
interface ShortlistPlayerRowProps {
  player: PlayerSummary;
  annotation: PlayerAnnotation;
  onAnnotationChange: (annotation: PlayerAnnotation) => void;
  onRemove: () => void;
  onMoveToShortlist: (shortlistId: string) => void;
}

interface PlayerAnnotation {
  tag: PlayerTag;
  note: string;
  addedDate: Date;
}

type PlayerTag = 'target' | 'watchlist' | 'loan' | 'academy' | 'avoid' | 'archived';
```

---

### TagSelector

Color-coded tag selection.

```typescript
interface TagSelectorProps {
  value: PlayerTag;
  onChange: (tag: PlayerTag) => void;
  variant?: 'dropdown' | 'pills';
}

const tagConfig: Record<PlayerTag, { label: string; color: string; icon: LucideIcon }> = {
  target: { label: 'Target', color: 'green', icon: Target },
  watchlist: { label: 'Watchlist', color: 'yellow', icon: Eye },
  loan: { label: 'Loan', color: 'blue', icon: ArrowRightLeft },
  academy: { label: 'Academy', color: 'orange', icon: GraduationCap },
  avoid: { label: 'Avoid', color: 'red', icon: Ban },
  archived: { label: 'Archived', color: 'gray', icon: Archive },
};
```

---

## Comparison Components

### ComparisonView

Side-by-side player comparison.

```typescript
interface ComparisonViewProps {
  players: Player[];
  onAddPlayer: () => void;
  onRemovePlayer: (playerId: string) => void;
  onExport: () => void;
  maxPlayers?: number;
  isGEdition: boolean;
}
```

**Structure:**
```tsx
<div className="flex flex-col h-full">
  {/* Header with player cards */}
  <div className="flex gap-4 p-4 border-b">
    {players.map(player => (
      <ComparisonPlayerHeader
        key={player.id}
        player={player}
        onRemove={() => onRemovePlayer(player.id)}
      />
    ))}
    {players.length < maxPlayers && (
      <AddPlayerCard onClick={onAddPlayer} />
    )}
  </div>
  
  {/* Comparison content */}
  <div className="flex-1 overflow-auto p-4">
    <ComparisonRadarChart players={players} />
    <ComparisonAttributeTable players={players} />
    <ComparisonRoleSuitability players={players} />
    
    {isGEdition && (
      <ComparisonDevelopment players={players} />
    )}
  </div>
</div>
```

---

### ComparisonAttributeTable

Table showing attribute differences.

```typescript
interface ComparisonAttributeTableProps {
  players: Player[];
  categories?: ('technical' | 'mental' | 'physical' | 'hidden')[];
  highlightDifferences?: boolean;
}
```

**Difference Highlighting:**
```typescript
const getDifferenceClass = (values: number[], index: number) => {
  const max = Math.max(...values);
  const min = Math.min(...values);
  const value = values[index];
  
  if (values.length < 2) return '';
  if (value === max && max !== min) return 'bg-green-100 dark:bg-green-900/30';
  if (value === min && max !== min) return 'bg-red-100 dark:bg-red-900/30';
  return '';
};
```

---

## Rating System Components

### RatingDesigner

Visual interface for creating custom rating schemes.

```typescript
interface RatingDesignerProps {
  existingSchemes: RatingScheme[];
  onSave: (scheme: RatingScheme) => void;
  onDelete: (schemeId: string) => void;
  onExport: (schemeId: string) => void;
  onImport: (file: File) => void;
  samplePlayers: Player[];
}

interface RatingScheme {
  id: string;
  name: string;
  position: Position;
  role?: Role;
  weights: Record<string, number>;
  createdAt: Date;
  modifiedAt: Date;
}
```

**Structure:**
```tsx
<div className="grid grid-cols-2 gap-6 h-full">
  {/* Left: Weight configuration */}
  <div className="space-y-4 overflow-auto">
    <PositionRoleSelector
      position={scheme.position}
      role={scheme.role}
      onChange={handlePositionChange}
    />
    
    <WeightSliderGroup
      title="Technical Attributes"
      weights={scheme.weights}
      attributes={technicalAttributes}
      onChange={handleWeightChange}
    />
    
    <WeightSliderGroup
      title="Mental Attributes"
      weights={scheme.weights}
      attributes={mentalAttributes}
      onChange={handleWeightChange}
    />
    
    <WeightSliderGroup
      title="Physical Attributes"
      weights={scheme.weights}
      attributes={physicalAttributes}
      onChange={handleWeightChange}
    />
  </div>
  
  {/* Right: Live preview */}
  <div className="border-l pl-6">
    <h3 className="font-semibold mb-4">Live Preview</h3>
    <RatingPreviewTable
      scheme={scheme}
      players={samplePlayers}
    />
  </div>
</div>
```

---

### WeightSlider

Individual attribute weight slider.

```typescript
interface WeightSliderProps {
  attribute: string;
  label: string;
  value: number;
  onChange: (value: number) => void;
  description?: string;
}
```

**Structure:**
```tsx
<div className="flex items-center gap-4">
  <label className="w-32 text-sm">{label}</label>
  <Slider
    value={[value]}
    onValueChange={([v]) => onChange(v)}
    min={0}
    max={100}
    step={5}
    className="flex-1"
  />
  <span className="w-12 text-right text-sm">{value}%</span>
  {description && (
    <Tooltip content={description}>
      <Info className="w-4 h-4 text-muted" />
    </Tooltip>
  )}
</div>
```

---

## History & Snapshot Components

### HistoryTimeline

Interactive timeline chart for attribute progression.

```typescript
interface HistoryTimelineProps {
  historyPoints: HistoryPoint[];
  selectedAttributes: string[];
  onAttributeToggle: (attribute: string) => void;
  onPointClick: (point: HistoryPoint) => void;
  onCreateSnapshot: () => void;
  onDeleteSnapshot: (pointId: string) => void;
}

interface HistoryPoint {
  id: string;
  date: Date;
  name: string;
  attributes: Record<string, number>;
  currentAbility: number;
  potentialAbility: number;
}
```

**Structure:**
```tsx
<div className="space-y-4">
  <div className="flex justify-between items-center">
    <AttributeFilterChips
      selected={selectedAttributes}
      onToggle={onAttributeToggle}
    />
    <Button onClick={onCreateSnapshot}>
      <Camera className="w-4 h-4 mr-2" /> Create Snapshot
    </Button>
  </div>
  
  <ResponsiveContainer width="100%" height={300}>
    <LineChart data={formatTimelineData(historyPoints, selectedAttributes)}>
      <CartesianGrid strokeDasharray="3 3" />
      <XAxis dataKey="date" tickFormatter={formatDate} />
      <YAxis domain={[0, 20]} />
      {selectedAttributes.map(attr => (
        <Line
          key={attr}
          type="monotone"
          dataKey={attr}
          stroke={getAttributeColor(attr)}
          dot={{ cursor: 'pointer' }}
          onClick={(data) => onPointClick(data.payload)}
        />
      ))}
      <Tooltip content={<TimelineTooltip />} />
    </LineChart>
  </ResponsiveContainer>
  
  <HistoryPointList
    points={historyPoints}
    onDelete={onDeleteSnapshot}
    onRename={onRenameSnapshot}
  />
</div>
```

---

### SnapshotComparison

Compare two history points.

```typescript
interface SnapshotComparisonProps {
  pointA: HistoryPoint;
  pointB: HistoryPoint;
  onClose: () => void;
}
```

---

## Export Components

### ExportDialog

Configurable export dialog.

```typescript
interface ExportDialogProps {
  isOpen: boolean;
  onClose: () => void;
  data: ExportableData;
  onExport: (config: ExportConfig) => void;
}

interface ExportConfig {
  format: 'html' | 'xlsx' | 'csv' | 'txt';
  columns: string[];
  includeHeaders: boolean;
  dateFormat: string;
  numberFormat: 'comma' | 'period';
  filename: string;
}
```

**Structure:**
```tsx
<Dialog open={isOpen} onOpenChange={onClose}>
  <DialogContent className="max-w-2xl">
    <DialogHeader>
      <DialogTitle>Export Data</DialogTitle>
    </DialogHeader>
    
    <div className="grid grid-cols-2 gap-6">
      {/* Left: Configuration */}
      <div className="space-y-4">
        <FormatSelector value={config.format} onChange={...} />
        <ColumnPicker
          available={availableColumns}
          selected={config.columns}
          onChange={...}
        />
        <ExportOptions config={config} onChange={...} />
      </div>
      
      {/* Right: Preview */}
      <div className="border rounded-lg p-4 bg-slate-50 dark:bg-slate-800">
        <h4 className="text-sm font-medium mb-2">Preview</h4>
        <ExportPreview data={data} config={config} />
      </div>
    </div>
    
    <DialogFooter>
      <Button variant="outline" onClick={onClose}>Cancel</Button>
      <Button onClick={() => onExport(config)}>
        <Download className="w-4 h-4 mr-2" /> Export
      </Button>
    </DialogFooter>
  </DialogContent>
</Dialog>
```

---

## "g" Edition Components

### GEditionGate

Wrapper component for gated features.

```typescript
interface GEditionGateProps {
  children: React.ReactNode;
  feature: GEditionFeature;
  fallback?: React.ReactNode;
}

type GEditionFeature = 
  | 'gsStats'
  | 'roleFinder'
  | 'topLists'
  | 'potentialSearch'
  | 'devProbability'
  | 'progressRate'
  | 'inGameScout';
```

**Implementation:**
```tsx
const GEditionGate = ({ children, feature, fallback }: GEditionGateProps) => {
  const { isGEdition, hasFeature } = useSubscription();
  
  if (isGEdition && hasFeature(feature)) {
    return <>{children}</>;
  }
  
  return fallback || <UpgradePrompt feature={feature} />;
};
```

---

### UpgradePrompt

Promotional component for non-g Edition users.

```typescript
interface UpgradePromptProps {
  feature: GEditionFeature;
  variant?: 'inline' | 'card' | 'modal';
  onUpgrade?: () => void;
  onDismiss?: () => void;
}
```

**Structure:**
```tsx
<Card className="p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200">
  <div className="flex gap-4">
    <div className="p-2 bg-amber-100 rounded-lg">
      <Crown className="w-6 h-6 text-amber-600" />
    </div>
    
    <div className="flex-1">
      <h4 className="font-semibold">{getFeatureTitle(feature)}</h4>
      <p className="text-sm text-muted mt-1">
        {getFeatureDescription(feature)}
      </p>
    </div>
    
    <Button onClick={onUpgrade} className="bg-amber-500 hover:bg-amber-600">
      Upgrade to g Edition
    </Button>
  </div>
</Card>
```

---

### DevelopmentForecast

GS STATS development projection visualization.

```typescript
interface DevelopmentForecastProps {
  playerId: string;
  projections: SkillProjection[];
  peakAge: number;
  idealSaleWindow: DateRange;
  onExport: () => void;
}

interface SkillProjection {
  attribute: string;
  currentValue: number;
  projectedValues: { age: number; value: number; confidence: number }[];
  peakValue: number;
  peakAge: number;
}
```

**Structure:**
```tsx
<GEditionGate feature="gsStats">
  <Card className="p-6">
    <div className="flex justify-between items-center mb-4">
      <h3 className="text-lg font-semibold">Development Forecast</h3>
      <GEditionBadge />
    </div>
    
    <div className="grid grid-cols-2 gap-6">
      {/* Projection chart */}
      <ProjectionChart
        projections={projections}
        selectedAttributes={selectedAttributes}
      />
      
      {/* Key insights */}
      <div className="space-y-4">
        <InsightCard
          icon={TrendingUp}
          title="Peak Age"
          value={`${peakAge} years old`}
        />
        <InsightCard
          icon={DollarSign}
          title="Ideal Sale Window"
          value={formatDateRange(idealSaleWindow)}
        />
        <InsightCard
          icon={Target}
          title="Expected Peak CA"
          value={expectedPeakCA}
        />
      </div>
    </div>
  </Card>
</GEditionGate>
```

---

### RoleFinder

Tactical role search interface.

```typescript
interface RoleFinderProps {
  onSearch: (config: RoleSearchConfig) => void;
  results: RoleSearchResult[];
  isLoading: boolean;
  squadPlayers?: Player[];
}

interface RoleSearchConfig {
  formation: string;
  position: Position;
  role: Role;
  duty: 'Defend' | 'Support' | 'Attack';
  filters: Partial<PlayerFilterState>;
}

interface RoleSearchResult {
  player: Player;
  suitability: number;
  tier: 'accomplished' | 'competent' | 'unconvincing' | 'unsuitable';
  keyStrengths: string[];
  keyWeaknesses: string[];
}
```

---

### TopListsView

Pre-built curated lists interface.

```typescript
interface TopListsViewProps {
  listType: 'topPlayers' | 'mostPromising' | 'topBargains';
  filters: TopListFilters;
  onFilterChange: (filters: TopListFilters) => void;
  results: TopListResult[];
  onPlayerClick: (playerId: string) => void;
  onExport: () => void;
}

interface TopListFilters {
  region: 'world' | string; // continent or country code
  position?: Position;
  ageRange?: [number, number];
  priceRange?: [number, number];
}
```

---

### DevProbabilityIndicator

Development probability visualization.

```typescript
interface DevProbabilityIndicatorProps {
  probability: number; // 0-100
  factors: DevFactor[];
  variant?: 'compact' | 'detailed';
}

interface DevFactor {
  name: string;
  impact: 'positive' | 'negative' | 'neutral';
  description: string;
}
```

**Structure:**
```tsx
<div className="space-y-2">
  <div className="flex items-center gap-2">
    <span className="text-sm font-medium">Development Probability</span>
    <Tooltip content="Likelihood of reaching potential ability">
      <Info className="w-4 h-4 text-muted" />
    </Tooltip>
  </div>
  
  <div className="relative h-3 bg-slate-200 rounded-full overflow-hidden">
    <div
      className={cn(
        "h-full rounded-full transition-all",
        probability >= 70 ? 'bg-green-500' :
        probability >= 40 ? 'bg-yellow-500' :
        'bg-red-500'
      )}
      style={{ width: `${probability}%` }}
    />
  </div>
  
  <span className={cn(
    "text-lg font-bold",
    probability >= 70 ? 'text-green-600' :
    probability >= 40 ? 'text-yellow-600' :
    'text-red-600'
  )}>
    {probability}%
  </span>
  
  {variant === 'detailed' && (
    <FactorList factors={factors} />
  )}
</div>
```

---

### ProgressRateGauge

Development pace visualization.

```typescript
interface ProgressRateGaugeProps {
  rate: 'slow' | 'normal' | 'fast';
  factors: ProgressFactor[];
  showExplanation?: boolean;
}
```

**Structure:**
```tsx
<div className="flex items-center gap-4">
  <div className="relative w-24 h-24">
    <GaugeChart
      value={rateToValue(rate)}
      min={0}
      max={100}
      colors={['#ef4444', '#f59e0b', '#22c55e']}
    />
    <div className="absolute inset-0 flex items-center justify-center">
      <span className="text-sm font-bold">{rate}</span>
    </div>
  </div>
  
  {showExplanation && (
    <div className="text-sm text-muted">
      {getExplanation(rate, factors)}
    </div>
  )}
</div>
```

---

## Common UI Components

### Button

```typescript
interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: 'default' | 'primary' | 'secondary' | 'outline' | 'ghost' | 'destructive';
  size?: 'sm' | 'md' | 'lg';
  loading?: boolean;
  leftIcon?: LucideIcon;
  rightIcon?: LucideIcon;
}
```

### Input

```typescript
interface InputProps extends React.InputHTMLAttributes<HTMLInputElement> {
  label?: string;
  error?: string;
  hint?: string;
  leftIcon?: LucideIcon;
  rightIcon?: LucideIcon;
}
```

### Select

```typescript
interface SelectProps {
  label?: string;
  options: SelectOption[];
  value: string;
  onChange: (value: string) => void;
  placeholder?: string;
  error?: string;
  searchable?: boolean;
}
```

### Checkbox

```typescript
interface CheckboxProps {
  label?: string;
  checked: boolean;
  onChange: (checked: boolean) => void;
  indeterminate?: boolean;
  disabled?: boolean;
}
```

### Modal/Dialog

```typescript
interface DialogProps {
  isOpen: boolean;
  onClose: () => void;
  title: string;
  description?: string;
  children: React.ReactNode;
  size?: 'sm' | 'md' | 'lg' | 'xl' | 'full';
}
```

### Toast

```typescript
interface ToastProps {
  title: string;
  description?: string;
  variant?: 'default' | 'success' | 'warning' | 'error';
  duration?: number;
  action?: {
    label: string;
    onClick: () => void;
  };
}
```

### Tooltip

```typescript
interface TooltipProps {
  content: React.ReactNode;
  children: React.ReactNode;
  side?: 'top' | 'right' | 'bottom' | 'left';
  delayDuration?: number;
}
```

### Badge

```typescript
interface BadgeProps {
  children: React.ReactNode;
  variant?: 'default' | 'primary' | 'secondary' | 'success' | 'warning' | 'error';
  size?: 'sm' | 'md';
}
```

### Card

```typescript
interface CardProps {
  children: React.ReactNode;
  className?: string;
  padding?: 'none' | 'sm' | 'md' | 'lg';
  hover?: boolean;
  onClick?: () => void;
}
```

### Avatar

```typescript
interface AvatarProps {
  src?: string;
  alt?: string;
  fallback: string;
  size?: 'sm' | 'md' | 'lg' | 'xl';
}
```

### ProgressBar

```typescript
interface ProgressBarProps {
  value: number;
  max?: number;
  label?: string;
  showValue?: boolean;
  variant?: 'default' | 'success' | 'warning' | 'error';
  size?: 'sm' | 'md' | 'lg';
}
```

---

## Performance Specifications

### Virtualization Requirements

| Component | Threshold | Strategy |
|-----------|-----------|----------|
| Player Table | > 100 rows | Virtual scrolling with TanStack Virtual |
| Staff Table | > 100 rows | Virtual scrolling |
| Shortlist | > 50 items | Virtual scrolling |
| Filter Options | > 50 items | Virtualized dropdown |
| Search Results | > 1000 | Pagination with virtual scroll |

### Rendering Optimizations

```typescript
// Memoization patterns
const PlayerCard = memo(({ player, onClick }) => {
  // Component implementation
});

const PlayerTable = memo(({ data, columns }) => {
  const sortedData = useMemo(() => 
    sortData(data, sortConfig), 
    [data, sortConfig]
  );
  
  const virtualRows = useVirtualizer({
    count: sortedData.length,
    // ...
  });
});

// Debounced filter updates
const useFilterDebounce = (filters: FilterState, delay = 300) => {
  const [debouncedFilters, setDebouncedFilters] = useState(filters);
  
  useEffect(() => {
    const timer = setTimeout(() => {
      setDebouncedFilters(filters);
    }, delay);
    
    return () => clearTimeout(timer);
  }, [filters, delay]);
  
  return debouncedFilters;
};
```

### Data Loading Patterns

```typescript
// Chunked loading for large datasets
const useChunkedLoad = (loadFn: () => Promise<any[]>, chunkSize = 10000) => {
  const [data, setData] = useState<any[]>([]);
  const [progress, setProgress] = useState(0);
  const [isLoading, setIsLoading] = useState(false);
  
  const load = useCallback(async () => {
    setIsLoading(true);
    let loaded = 0;
    
    while (true) {
      const chunk = await loadFn(loaded, chunkSize);
      if (chunk.length === 0) break;
      
      setData(prev => [...prev, ...chunk]);
      loaded += chunk.length;
      setProgress(loaded);
    }
    
    setIsLoading(false);
  }, [loadFn, chunkSize]);
  
  return { data, progress, isLoading, load };
};
```

### Indexing Strategy

```typescript
// Pre-computed indexes for fast filtering
interface DatabaseIndexes {
  byPosition: Map<Position, Set<string>>;
  byNationality: Map<string, Set<string>>;
  byClub: Map<string, Set<string>>;
  byAbilityRange: Map<string, Set<string>>; // e.g., "ca_150_160"
  byAge: Map<number, Set<string>>;
}

const buildIndexes = (players: Player[]): DatabaseIndexes => {
  // Build indexes on initial load
  // Use for intersection-based filtering
};
```

---

## Accessibility Requirements

### Keyboard Navigation

| Context | Keys | Action |
|---------|------|--------|
| Global | `Ctrl+K` | Open global search |
| Global | `Ctrl+B` | Toggle sidebar |
| Table | `↑↓` | Navigate rows |
| Table | `Enter` | Open selected row |
| Table | `Space` | Toggle row selection |
| Modal | `Esc` | Close modal |
| Tabs | `←→` | Navigate tabs |
| Slider | `←→` | Adjust value |

### ARIA Attributes

```tsx
// Table example
<table role="grid" aria-label="Player search results">
  <thead>
    <tr role="row">
      <th role="columnheader" aria-sort={sortDirection}>Name</th>
    </tr>
  </thead>
  <tbody>
    {rows.map(row => (
      <tr 
        role="row" 
        aria-selected={selected}
        tabIndex={0}
      >
        {/* cells */}
      </tr>
    ))}
  </tbody>
</table>

// Slider example
<input
  type="range"
  role="slider"
  aria-label="Minimum age"
  aria-valuemin={0}
  aria-valuemax={50}
  aria-valuenow={value}
/>
```

### Focus Management

```typescript
// Trap focus in modals
const useFocusTrap = (isOpen: boolean) => {
  const ref = useRef<HTMLDivElement>(null);
  
  useEffect(() => {
    if (!isOpen) return;
    
    const element = ref.current;
    const focusableElements = element?.querySelectorAll(
      'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
    );
    
    // Focus first element
    // Handle Tab cycling
  }, [isOpen]);
  
  return ref;
};
```

---

## State Management Schema

### Zustand Store Structure

```typescript
interface AppStore {
  // Database state
  database: {
    loaded: boolean;
    loading: boolean;
    progress: number;
    status: string;
    players: Map<string, Player>;
    staff: Map<string, Staff>;
    clubs: Map<string, Club>;
    indexes: DatabaseIndexes;
  };
  
  // UI state
  ui: {
    theme: 'light' | 'dark';
    sidebarCollapsed: boolean;
    activeModal: string | null;
    toasts: Toast[];
  };
  
  // Filter state
  filters: {
    players: PlayerFilterState;
    staff: StaffFilterState;
    clubs: ClubFilterState;
    savedFilters: SavedFilter[];
    history: FilterState[];
  };
  
  // Shortlist state
  shortlists: {
    lists: Shortlist[];
    activeId: string | null;
    syncStatus: 'synced' | 'syncing' | 'error';
    autoSync: boolean;
  };
  
  // Preferences
  preferences: {
    directories: DirectoryPaths;
    defaultColumns: Record<string, string[]>;
    ratingSchemes: RatingScheme[];
  };
  
  // Subscription
  subscription: {
    isGEdition: boolean;
    expiryDate: Date | null;
    features: GEditionFeature[];
  };
  
  // Actions
  actions: {
    loadDatabase: (path?: string) => Promise<void>;
    setFilter: (entity: string, filter: Partial<FilterState>) => void;
    resetFilters: (entity: string) => void;
    addToShortlist: (playerId: string, shortlistId: string) => void;
    // ... etc
  };
}
```

---

*Document Version: 1.0 | Last Updated: December 2025*
